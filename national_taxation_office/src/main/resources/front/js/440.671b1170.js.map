{"version":3,"file":"js/440.671b1170.js","mappings":"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","sources":["webpack://front/./src/views/actorManagement.vue","webpack://front/./src/views/actorManagement.vue?7968"],"sourcesContent":["<template>\n  <div>\n    <el-card>\n      <el-row :gutter=\"20\">\n        <el-col :span=\"8\">\n          <!-- 搜索与添加区域 -->\n          <el-input placeholder=\"请输入内容\" v-model.trim.lazy=\"searchText\" @keyup.enter=\"searchTableData\">\n            <template #append>\n              <el-button class=\"el-icon-search\" @click=\"searchTableData\"></el-button>\n            </template>\n          </el-input>\n        </el-col>\n        <el-col :span=\"4\">\n          <el-button type=\"primary\" @click=\"openAddRoleDialog\">添加角色</el-button>\n        </el-col>\n        <el-col :span=\"4\">\n          <el-button type=\"danger\" @click=\"multipleDelete\">批量删除</el-button>\n        </el-col>\n<!--        <el-col :span=\"4\">-->\n<!--          <el-button type=\"info\" @click=\"selectAllRows\">全选</el-button>-->\n<!--        </el-col>-->\n      </el-row>\n    </el-card>\n    <el-scrollbar>\n      <el-table :data=\"paginatedTableData\" ref=\"multipleTableRef\" @selection-change=\"handleSelectionChange\">\n        <el-table-column type=\"selection\" width=\"55\"></el-table-column>\n        <el-table-column prop=\"roleName\" label=\"角色名称\" span=\"4\"></el-table-column>\n<!--        <el-table-column prop=\"state\" label=\"权限\" span=\"4\"></el-table-column>-->\n<!--        <el-table-column label=\"权限名\" span=\"4\">-->\n<!--          <template #default=\"scope\">-->\n<!--            <span v-if=\"scope.row.state === 1\">个人空间</span>-->\n<!--            <span v-else-if=\"scope.row.state === 2\">纳税服务</span>-->\n<!--            <span v-else-if=\"scope.row.state === 3\">权限3</span>-->\n<!--            <span v-else-if=\"scope.row.state === 4\">权限4</span>-->\n<!--          </template>-->\n<!--        </el-table-column>-->\n        <!--        <el-table-column prop=\"status\" label=\"状态\"></el-table-column>-->\n        <el-table-column label=\"操作\">\n          <template v-slot=\"scope\">\n            <el-button type=\"primary\" @click=\"editRole(scope.row)\">编辑</el-button>\n            <el-button type=\"danger\" @click=\"deleteRole(scope.row)\">删除</el-button>\n          </template>\n        </el-table-column>\n      </el-table>\n    </el-scrollbar>\n\n    <!-- 添加/编辑角色弹窗 -->\n    <el-dialog v-model=\"showAddRoleDialog\" title=\"添加/编辑用户\" @close=\"resetEditingRole\">\n      <el-form :model=\"editingRole\" label-width=\"100px\" :rules=\"formRules\">\n        <el-form-item label=\"角色名称\">\n          <el-input v-model=\"editingRole.roleName\" :disabled=\"editingRole.editing\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"权限\">\n          <template v-if=\"editingRole.operation === 'addRoleOperation'\">\n            <el-radio-group v-model=\"editingRole.authority\">\n              <el-radio :label=\"1\">个人空间</el-radio>\n              <el-radio :label=\"2\">纳税服务</el-radio>\n<!--              <el-radio :label=\"3\">权限3</el-radio>-->\n<!--              <el-radio :label=\"4\">权限4</el-radio>-->\n            </el-radio-group>\n          </template>\n          <template v-else-if=\"editingRole.operation === 'editRoleOperation'\">\n            <el-radio-group v-model=\"editingRole.authority\">\n              <el-radio :label=\"1\">权限1</el-radio>\n              <el-radio :label=\"2\">权限2</el-radio>\n              <el-radio :label=\"3\">权限3</el-radio>\n              <el-radio :label=\"4\">权限4</el-radio>\n            </el-radio-group>\n          </template>\n        </el-form-item>\n        <!--        <el-form-item label=\"状态\">-->\n        <!--          <el-input v-model=\"editingRole.status\"></el-input>-->\n        <!--        </el-form-item>-->\n      </el-form>\n      <div slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"cancelAddRole\">取消</el-button>\n        <el-button type=\"primary\" @click=\"saveRole\">保存</el-button>\n      </div>\n    </el-dialog>\n\n    <!--分页-->\n    <el-pagination\n        @size-change=\"handlePageSizeChange\"\n        @current-change=\"handleCurrentPageChange\"\n        :current-page=\"currentPage\"\n        :page-sizes=\"[10, 20, 30, 50]\"\n        :page-size=\"pageSize\"\n        :total=\"filteredTableData.length\"\n        layout=\"sizes, prev, pager, next, jumper\"\n        class=\"pagination-centered\"\n    >\n    </el-pagination>\n  </div>\n</template>\n\n<script>\nimport {ref, computed, watch, onMounted} from 'vue';\nimport axios from 'axios';\nimport ServicePort from './ServicePort';\nimport {\n  ElTable,\n  ElDialog,\n  ElMessageBox,\n  ElForm,\n  ElFormItem,\n  ElInput,\n  ElButton,\n  ElMessage,\n  ElPagination\n} from 'element-plus';\n\nexport default {\n  components: {ElTable, ElDialog, ElMessageBox, ElForm, ElFormItem, ElInput, ElButton, ElMessage, ElPagination},\n  setup() {\n    const port = 80;\n    const searchText = ref('');\n    const tableData = ref([]);\n    //搜索数据\n    const filteredTableData = ref([]);\n    //tableData副本\n    const allTableData = ref([]);\n    const showAddRoleDialog = ref(false);\n    const editingRole = ref({});\n    const multipleTableRef = ref();\n    const multipleSelection = ref([]);\n    // 分页\n    const currentPage = ref(1);\n    const pageSize = ref(5);\n    const totalPages = ref(0);\n    const formRules = {\n      roleName: [\n        { required: true, message: '角色名称不能为空', trigger: 'blur' },\n      ],\n    };\n    // const filteredTableData = computed(() => {\n    //   if (searchText.value) {\n    //     const keyword = searchText.value.trim().toLowerCase();\n    //     return tableData.value.filter((item) => item.roleName.toLowerCase().includes(keyword));\n    //   } else {\n    //     return tableData.value;\n    //   }\n    // });\n    // const isDataLoaded = ref(false);\n    //获取数据\n    const fetchTableData = async () => {\n      try {\n        const data = await ServicePort.fetchTableData();\n        //test\n        // // console.log(\"tableData:\",data);\n        // isDataLoaded.value = true;\n        tableData.value = data;\n        allTableData.value = [...data];\n        filteredTableData.value = tableData;\n        //test\n        // console.log(\"filteredTableData:\",filteredTableData);\n        // console.log(\"tableData:\",tableData);\n      } catch (error) {\n\n      }\n    };\n\n    onMounted(() => {\n      fetchTableData();\n    });\n\n    const searchTableData = () => {\n      // 清除当前页和选择的数据\n      currentPage.value = 1;\n      multipleSelection.value = [];\n\n      if (searchText.value) {\n        const keyword = searchText.value.trim().toLowerCase();\n        const filteredData = tableData.value.filter((item) => item.roleName.toLowerCase().includes(keyword));\n        if (filteredData.length === 0) {\n          ElMessageBox.alert('查询失败', '提示', {\n            type: 'error',\n          });\n        } else {\n          filteredTableData.value = filteredData;\n          totalPages.value = Math.ceil(filteredData.length / pageSize.value);\n        }\n      } else {\n        filteredTableData.value = tableData.value;\n      }\n    };\n\n    // const multipleDelete = () => {\n    //   if (multipleSelection.value.length > 0) {\n    //     ElMessageBox.confirm('确定要删除选中的数据吗？', '提示', {\n    //       type: 'warning',\n    //     })\n    //         .then(() => {\n    //           const selectedRows = multipleSelection.value;\n    //           tableData.value = tableData.value.filter((row) => !selectedRows.includes(row));\n    //           multipleSelection.value = [];\n    //           ElMessage.success('删除成功');\n    //         })\n    //         .catch(() => {\n    //           // 取消删除\n    //         });\n    //   } else {\n    //     ElMessage.warning('请先选择要删除的数据');\n    //   }\n    // };\n\n    const multipleDelete = async () => {\n      if (multipleSelection.value.length > 0) {\n        try {\n          const selectedRows = multipleSelection.value;\n          const roleIds = selectedRows.map((row) => row.roleId); // 唯一的 id 字段\n          console.log(roleIds);\n          await axios.delete(`http://localhost:${port}/roles/batch`, { data: roleIds });\n          tableData.value = tableData.value.filter((row) => !selectedRows.includes(row)); // 在前端中过滤掉选中的行数据\n          multipleSelection.value = [];\n          ElMessage.success(\"批量删除成功\");\n        } catch (error) {\n          console.error(\"Error deleting roles:\", error);\n        }\n      } else {\n        ElMessage.warning(\"请先选择要删除的数据\");\n      }\n    };\n\n    // const selectAllRows = () => {\n    //   if (isAllSelected) {\n    //     // 已经全选，取消全选\n    //     multipleSelection.value = [];\n    //   } else {\n    //     // 未全选，全选所有数据行\n    //     console.log(filteredTableData)\n    //     multipleSelection.value = [...filteredTableData.value];\n    //   }\n    // };\n    //\n    // const isAllSelected = computed(() => multipleSelection.value.length === filteredTableData.value.length);\n\n\n    const editRole = (row) => {\n      showAddRoleDialog.value = true;\n      editingRole.value = {...row, editing: true, operation: 'editRoleOperation'};\n    };\n\n    // const deleteRole = (index) => {\n    //   console.log(tableData.value[index])\n    //   console.log(tableData.value[index].roleId)\n    //   tableData.value.splice(index, 1);\n    // };\n\n    const deleteRole = async (row) => {\n      const roleId = row.roleId; // 唯一的 id 字段\n      console.log(roleId);\n      console.log(row);\n      try {\n        await axios.delete(`http://localhost:${port}/roles/delete/${roleId}`);\n        tableData.value = tableData.value.filter((item) => item.roleId !== roleId);; // 在前端中删除指定索引位置的数据\n        filteredTableData.value = filteredTableData.value.filter((item) => item.roleId !== roleId); // 更新 filteredTableData\n      } catch (error) {\n        console.error(\"Error deleting role:\", error);\n      }\n    };\n\n\n    const openAddRoleDialog = () => {\n      showAddRoleDialog.value = true;\n      editingRole.value = {editing: false, operation: 'addRoleOperation'};\n    };\n\n    const cancelAddRole = () => {\n      showAddRoleDialog.value = false;\n      editingRole.value = {};\n    };\n\n    const saveRole = async () => {\n      if (editingRole.value.roleName && editingRole.value.authority) {\n        editingRole.value.state = Number(editingRole.value.authority);\n        const existingRole = tableData.value.find((role) => role.roleName === editingRole.value.roleName && role.state === editingRole.value.state);\n        if (existingRole) {\n          ElMessage.warning('已经给该角色赋予过该权限了');\n          return; // 如果存在相同的角色，停止保存操作\n        }\n\n        if (editingRole.value.editing) {\n          //编辑\n          // console.log(editingRole.value);\n          // console.log(editingRole.value.roleId);\n          const updateRole ={\n            roleId:editingRole.value.roleId,\n            roleName:editingRole.value.roleName,\n            state:editingRole.value.state\n          }\n          // console.log(editingRole.value.roleId);\n          // console.log(updateRole);\n          const response = await axios.put(`http://localhost:${port}/roles/update/${editingRole.value.roleId}`, updateRole);\n          // console.log(response); // 可选：打印响应结果\n          const index = tableData.value.findIndex((role) => role.roleName === editingRole.value.roleName);\n          if (index !== -1) {\n            tableData.value[index] = {...editingRole.value, editing: false};\n          }\n        } else {\n          //保存\n          const addRole = {\n            roleId: editingRole.value.roleId,\n            roleName:editingRole.value.roleName,\n            state:editingRole.value.state\n          }\n          const response = await  axios.post(`http://localhost:${port}/roles/addRole`,addRole)\n          tableData.value.push({...editingRole.value});\n        }\n        showAddRoleDialog.value = false;\n        editingRole.value = {};\n      } else {\n        ElMessage.warning('请填写必要信息');\n      }\n    };\n\n    const resetEditingRole = () => {\n      editingRole.value = {};\n    };\n\n    const handleSelectionChange = (val) => {\n      multipleSelection.value = val;\n    };\n\n    const paginatedTableData = computed(() => {\n      const startIndex = (currentPage.value - 1) * pageSize.value;\n      const endIndex = startIndex + pageSize.value;\n      totalPages.value = Math.ceil(filteredTableData.value.length / pageSize.value);\n      return filteredTableData.value.slice(startIndex, endIndex);\n    });\n\n    const handlePageSizeChange = (newPageSize) => {\n      pageSize.value = newPageSize;\n      currentPage.value = 1;\n    };\n\n    const handleCurrentPageChange = (newPage) => {\n      const totalPages = Math.ceil(filteredTableData.value.length / pageSize.value);\n      currentPage.value = Math.max(1, Math.min(newPage, totalPages));\n    };\n\n    watch(tableData, (newTableData) => {\n      filteredTableData.value = newTableData;\n    });\n\n    return {\n      searchText,\n      tableData,\n      showAddRoleDialog,\n      editingRole,\n      multipleTableRef,\n      multipleSelection,\n      currentPage,\n      pageSize,\n      totalPages,\n      filteredTableData,\n      formRules,\n      searchTableData,\n      multipleDelete,\n      // selectAllRows,\n      editRole,\n      deleteRole,\n      openAddRoleDialog,\n      cancelAddRole,\n      saveRole,\n      resetEditingRole,\n      handleSelectionChange,\n      paginatedTableData,\n      handlePageSizeChange,\n      handleCurrentPageChange,\n    };\n\n\n  },\n};\n</script>","import { render } from \"./actorManagement.vue?vue&type=template&id=12bffc24\"\nimport script from \"./actorManagement.vue?vue&type=script&lang=js\"\nexport * from \"./actorManagement.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["slot","class","_createElementBlock","_createVNode","_component_el_card","_component_el_row","gutter","_component_el_col","span","_component_el_input","placeholder","$setup","searchText","$event","trim","lazy","onKeyup","_withKeys","searchTableData","append","_withCtx","_component_el_button","onClick","type","openAddRoleDialog","multipleDelete","_component_el_scrollbar","_component_el_table","data","paginatedTableData","ref","onSelectionChange","handleSelectionChange","_component_el_table_column","width","prop","label","scope","editRole","row","deleteRole","_component_el_dialog","showAddRoleDialog","title","onClose","resetEditingRole","_component_el_form","model","editingRole","rules","formRules","_component_el_form_item","roleName","disabled","editing","operation","_createBlock","_component_el_radio_group","authority","_component_el_radio","_createElementVNode","_hoisted_1","cancelAddRole","saveRole","_component_el_pagination","onSizeChange","handlePageSizeChange","onCurrentChange","handleCurrentPageChange","currentPage","pageSize","total","filteredTableData","length","layout","components","ElTable","ElDialog","ElMessageBox","ElForm","ElFormItem","ElInput","ElButton","ElMessage","ElPagination","setup","port","tableData","allTableData","multipleTableRef","multipleSelection","totalPages","required","message","trigger","fetchTableData","async","ServicePort","value","error","onMounted","keyword","toLowerCase","filteredData","filter","item","includes","alert","Math","ceil","selectedRows","roleIds","map","roleId","console","log","axios","delete","success","warning","state","Number","existingRole","find","role","updateRole","index","put","findIndex","addRole","post","push","val","computed","startIndex","endIndex","slice","newPageSize","newPage","max","min","watch","newTableData","__exports__","render"],"sourceRoot":""}